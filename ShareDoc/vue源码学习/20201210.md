# Virtual Dom



> 本文使用的vue版本为3.0.4



### 什么是Virtual Dom?

英文全称`Virtual Document Object Model`，直译：虚拟的文档对象模型。

简而言之，就是使用Js 对象去描述一个dom节点，有很多相关的文章描述，这里不再赘述。

我们可以像这样理解一个`Virtual Dom`。

```html
<div id="app">my vdom</div>
```

```js
const vdom = {
  tag:'div',
  text:'my vdom',
  attributes:{
    id:'app'
  },
  children:[]
}
```



而在vue中，有一种自己独特的`Virtual Dom`——VNode，在`Virtual Dom`的思想基础上，添加了一些vue运行编译所需要的属性，一个空的VNode模板在源码中是这样定义的：

```typescript
// packages/runtime-core/src/vnode.ts
const vnode: VNode = {
    __v_isVNode: true, // 区分VNode与普通js object的标志
    [ReactiveFlags.SKIP]: true,
    type,
    props,
    key: props && normalizeKey(props),
    ref: props && normalizeRef(props),
    scopeId: currentScopeId,
    children: null,
    component: null,
    suspense: null,
    ssContent: null,
    ssFallback: null,
    dirs: null,
    transition: null,
    el: null,
    anchor: null,
    target: null,
    targetAnchor: null,
    staticCount: 0,
    shapeFlag,
    patchFlag,
    dynamicProps,
    dynamicChildren: null,
    appContext: null
}
```

