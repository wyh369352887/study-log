# setup()

## setup()是什么？

从vue3的[官方文档](https://www.vue3js.cn/docs/zh/)提炼一下信息：

> **产生的背景：** 当我们的组件越来越复杂时，不同的逻辑关注点也会越来越多，这会导致组件难以阅读和理解，尤其是对于没有从一开始就参与进来的开发人员而言。

> **作用：** 将同一个逻辑关注点相关的代码配置在一起，避免处理单个逻辑关注点时，必须不断地“跳转”相关代码的选项块。

## 用法：
- 调用时机：组件被创建之前，所以没有`this`，无法访问`data,methods,computed`。
- `(props,context)`：传递给组件的`props`和之前`this`上的3个属性`attrs,slots,emit`。
- 返回一个对象：该对象可以被组件的其余部分（computed、methods、声明周期钩子、组件模板等）使用。
- 返回一个`render`函数：**只能使用在同一作用域中声明的响应式状态（无法使用例如data、computed中的响应式状态）**。

```typescript
<script>
import { h,ref } from "vue";
export default {
  data() {
    return {
      dataInData: "dataInData",
    };
  },
  computed: {
    dataInComputed() {
      return "dataInComputed";
    },
  },
  setup() {
    const dataInSetup = ref('dataInSetup')
    return () =>
      h("div", [
        dataInData, // error, dataInData is not defined
        dataInComputed, // error, dataInComputed is not defined
        dataInSetup.value, // work
      ]);
  },
};
</script>Ï
```